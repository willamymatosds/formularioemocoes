<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Avaliação de Emoção - Gráfico</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        h1 {
            color: #333;
            font-size: 2em;
            text-align: center;
            margin-bottom: 30px;
        }
        .form-section {
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .button {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 30px;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .graph-container {
            width: 100%;
            height: 300px;
            background-color: #f5f5f5;
            position: relative;
            margin-top: 20px;
            border: 2px solid #ddd;
        }
        .axis {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .point {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: #007BFF;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Pesquisa de Avaliação de Emoção</h1>

    <!-- Página 1: Introdução e Consentimento -->
    <div class="form-section active" id="page1">
        <h2>Prezado(a) Participante,</h2>
        <p>Você está sendo convidado(a) a participar de uma pesquisa que envolve a avaliação de textos curtos quanto à emoção que eles evocam. Antes de decidir participar, é importante que você leia e compreenda os termos deste documento.</p>
        <p><strong>Objetivo da Pesquisa:</strong> O objetivo deste estudo é avaliar as emoções evocadas por diferentes textos.</p>
        <p><strong>Procedimentos:</strong> Você será solicitado(a) a ler uma série de textos curtos e, em seguida, avaliar a emoção que cada texto evoca.</p>
        <p><strong>Confidencialidade:</strong> Todas as informações coletadas neste estudo serão tratadas com confidencialidade. Seus dados serão utilizados exclusivamente para fins de pesquisa e análise. Nenhuma informação pessoal que possa identificá-lo(a) será divulgada.</p>
        <p><strong>Voluntariedade:</strong> Sua participação é totalmente voluntária. Você pode recusar-se a participar ou retirar seu consentimento a qualquer momento, sem qualquer penalidade ou prejuízo.</p>
        <p><strong>Consentimento:</strong> Ao prosseguir com este formulário, você confirma que:</p>
        <ul>
            <li>Compreendeu as informações acima.</li>
            <li>Concorda em participar voluntariamente desta pesquisa.</li>
            <li>Autoriza o uso dos dados fornecidos para os fins descritos.</li>
        </ul>
        <p>Se você tiver dúvidas sobre a pesquisa ou seus direitos como participante, sinta-se à vontade para entrar em contato com os pesquisadores responsáveis pelo e-mail: <a href="mailto:willamymatosds@gmail.com">willamymatosds@gmail.com</a></p>
        <button class="button" onclick="nextPage(2)">Próximo</button>
    </div>

    <!-- Página 2: Dados Demográficos -->
    <div class="form-section" id="page2">
        <h2>Dados Demográficos</h2>
        <form id="formulario">
            <label for="idade">Qual a sua idade?</label>
            <input type="number" id="idade" name="idade" required><br>

            <label for="genero">Gênero:</label>
            <select id="genero" name="genero">
                <option value="masculino">Masculino</option>
                <option value="feminino">Feminino</option>
            </select><br>

            <label for="escolaridade">Escolaridade:</label>
            <select id="escolaridade" name="escolaridade">
                <option value="ensino_medio_completo">Ensino Médio Completo</option>
                <option value="ensino_superior_incompleto">Ensino Superior Incompleto</option>
                <option value="ensino_superior_completo">Ensino Superior Completo</option>
                <option value="pos_graduacao">Pós-Graduação</option>
            </select><br>

            <label for="falante_nativo">Você é falante nativo do português?</label>
            <select id="falante_nativo" name="falante_nativo">
                <option value="sim">Sim</option>
                <option value="nao">Não</option>
            </select><br>

            <label for="frequencia_leitura">Com que frequência você lê livros ou artigos?</label>
            <select id="frequencia_leitura" name="frequencia_leitura">
                <option value="diariamente">Diariamente</option>
                <option value="semanalmente">Semanalmente</option>
                <option value="mensalmente">Mensalmente</option>
                <option value="raramente">Raramente</option>
                <option value="nunca">Nunca</option>
            </select><br>

            <button class="button" type="button" onclick="nextPage(3)">Próximo</button>
        </form>
    </div>

    <!-- Página 3: Avaliação do Texto com Gráfico -->
    <div class="form-section" id="page3">
        <h2>Avaliação do Texto</h2>
        <p>Hoje, me despedi de uma pessoa muito importante na minha vida. O enterro foi silencioso, e o peso da ausência tomou conta de mim. As lágrimas vieram sem que eu pudesse controlá-las. Senti como se uma parte de mim tivesse sido arrancada, deixando um buraco que nunca mais será preenchido. Enquanto as pessoas ao redor também choravam, eu tentava entender como seguir em frente sem aquela pessoa ao meu lado.</p>

        <h3>Marque a posição da valência emocional no gráfico abaixo</h3>
        <div class="graph-container" id="graph">
            <div class="axis">
                <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%);">Neutra</div>
                <div style="position: absolute; top: 50%; left: 0;">Muito Negativa</div>
                <div style="position: absolute; top: 50%; right: 0;">Muito Positiva</div>
            </div>
            <div class="point" id="point" style="left: 50%; top: 50%;" draggable="true"></div>
        </div>

        <button class="button" type="button" id="submitForm">Enviar</button>
    </div>

    <script>
        let currentPage = 1;

        function nextPage(pageNumber) {
            document.getElementById(`page${currentPage}`).classList.remove('active');
            document.getElementById(`page${pageNumber}`).classList.add('active');
            currentPage = pageNumber;
        }

        // Gráfico de plano cartesiano
        const graph = document.getElementById('graph');
        const point = document.getElementById('point');
        const submitButton = document.getElementById('submitForm');

        let isDragging = false;

        point.addEventListener('mousedown', function(event) {
            isDragging = true;
        });

        document.addEventListener('mousemove', function(event) {
            if (isDragging) {
                const rect = graph.getBoundingClientRect();
                let x = event.clientX - rect.left;
                let y = event.clientY - rect.top;

                // Garantir que o ponto não saia do gráfico
                x = Math.max(0, Math.min(x, rect.width));
                y = Math.max(0, Math.min(y, rect.height));

                point.style.left = `${x - point.offsetWidth / 2}px`;
                point.style.top = `${y - point.offsetHeight / 2}px`;
            }
        });

        document.addEventListener('mouseup', function() {
            isDragging = false;
        });

        submitButton.addEventListener('click', function() {
            const rect = graph.getBoundingClientRect();
            const xPosition = parseFloat(point.style.left) + point.offsetWidth / 2;
            const valencia = (xPosition / rect.width) * 10; // escala de 0 a 10

            const idade = document.getElementById('idade').value;
            const genero = document.getElementById('genero').value;
            const escolaridade = document.getElementById('escolaridade').value;
            const falanteNativo = document.getElementById('falante_nativo').value;
            const frequenciaLeitura = document.getElementById('frequencia_leitura').value;

            const formData = new FormData();
            formData.append('idade', idade);
            formData.append('genero', genero);
            formData.append('escolaridade', escolaridade);
            formData.append('falante_nativo', falanteNativo);
            formData.append('frequencia_leitura', frequenciaLeitura);
            formData.append('avaliacao_valencia', valencia);

            fetch('https://script.google.com/macros/s/AKfycbya0zuwdBluziHPA9mW5IXTMRpN6jH_NpFkv3gWbTY/dev', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                alert("Obrigado pela sua resposta!");
                // Após o envio, você pode redirecionar ou mostrar uma nova página, se necessário.
            })
            .catch(error => {
                alert("Erro ao enviar resposta. Tente novamente.");
            });
        });
    </script>
</body>
</html>
